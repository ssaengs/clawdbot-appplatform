spec:
  name: moltbot
  region: tor
  workers:
    - name: moltbot
      dockerfile_path: /Dockerfile
      source_dir: /
      instance_count: 1
      instance_size_slug: apps-s-2vcpu-4gb
      git:
        branch: main
        repo_clone_url: https://github.com/digitalocean-labs/moltbot-appplatform.git
      envs:
        # Required
        - key: SETUP_PASSWORD
          scope: RUN_TIME
          type: SECRET

        # Feature flags
        - key: ENABLE_NGROK
          scope: RUN_TIME
          value: "false"
        - key: ENABLE_TAILSCALE
          scope: RUN_TIME
          value: "false"
        - key: ENABLE_SPACES
          scope: RUN_TIME
          value: "false"
        - key: ENABLE_UI
          scope: RUN_TIME
          value: "true"

        # ngrok config
        - key: NGROK_AUTHTOKEN
          scope: RUN_TIME
          type: SECRET

        # Tailscale config
        - key: TS_AUTHKEY
          scope: RUN_TIME
          type: SECRET
        - key: TS_HOSTNAME
          scope: RUN_TIME
          value: moltbot
        - key: TS_USERSPACE
          scope: RUN_TIME
          value: "true"
        - key: TS_SOCKET
          scope: RUN_TIME
          value: /tmp/tailscaled.sock

        # Spaces config
        - key: LITESTREAM_ACCESS_KEY_ID
          scope: RUN_TIME
          type: SECRET
        - key: LITESTREAM_SECRET_ACCESS_KEY
          scope: RUN_TIME
          type: SECRET
        - key: SPACES_ENDPOINT
          scope: RUN_TIME
          value: tor1.digitaloceanspaces.com
        - key: SPACES_BUCKET
          scope: RUN_TIME
          value: moltbot-backup
        - key: RESTIC_PASSWORD
          scope: RUN_TIME
          type: SECRET

        # Optional
        - key: MOLTBOT_GATEWAY_TOKEN
          scope: RUN_TIME
          type: SECRET
        - key: GRADIENT_API_KEY
          scope: RUN_TIME
          type: SECRET
        - key: ENABLE_SSH
          scope: RUN_TIME
          value: "false"
        - key: GITHUB_USERNAME
          scope: RUN_TIME
          value: ""
